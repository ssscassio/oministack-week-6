{"version":3,"sources":["pages/Main/styles.js","services/api.js","pages/Main/index.js","pages/Box/index.js","routes.js","App.js","index.js","assets/logo.svg"],"names":["Container","styled","div","_templateObject","SubmitButton","button","_templateObject2","props","color","baseURL","api","axios","create","Main","_useState","useState","_useState2","Object","slicedToArray","newBox","setNewBox","handleSubmit","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","e","response","wrap","_context","prev","next","preventDefault","post","title","sent","history","push","concat","data","_id","stop","_x","apply","this","arguments","react_default","createElement","onSubmit","action","src","logo","alt","onChange","target","value","placeholder","type","disabled","reducer","box","objectSpread","files","toConsumableArray","Box","_useReducer","useReducer","_useReducer2","dispatchBox","useEffect","_fetchApi","boxId","match","params","id","get","io","socket","emit","on","subscribeToNewFiles","fetchApi","es","onDropAccepted","forEach","file","FormData","append","getRootProps","getInputProps","assign","className","map","key","href","url","index_esm","size","distanceInWords","createdAt","Date","locale","pt","Routes","react_router_dom","react_router","path","exact","component","App","routes","ReactDOM","render","src_App_0","document","getElementById","module","exports","__webpack_require__","p"],"mappings":"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","file":"static/js/main.48fc31d1.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nexport const Container = styled.div`\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  form {\n    width: 300px;\n    display: flex;\n    flex-direction: column;\n    input {\n      height: 48px;\n      border: 1px solid #ddd;\n      border-radius: 4px;\n      font-size: 16px;\n      padding: 0 20px;\n      margin-top: 30px;\n    }\n  }\n`;\n\nexport const SubmitButton = styled.button`\n  height: 48px;\n  background: ${props => props.color || '#7159c1'};\n  color: #fff;\n  font-weight: bold;\n  border-radius: 4px;\n  font-size: 16px;\n  padding: 0 20px;\n  margin-top: 10px;\n  border: 0;\n  cursor: pointer;\n  &:hover {\n    opacity: 0.8;\n  }\n`;\n","import axios from 'axios';\n\n// TODO: Change for my heroku application\nexport const baseURL = 'https://omnistack-week.herokuapp.com';\nconst api = axios.create({\n  baseURL: baseURL\n});\n\nexport default api;\n","import React, { useState } from 'react';\n\nimport logo from '../../assets/logo.svg';\n\nimport { Container, SubmitButton } from './styles';\n\nimport api from '../../services/api';\n\nconst Main = props => {\n  // Using React hooks\n  const [newBox, setNewBox] = useState('');\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const response = await api.post('/boxes', { title: newBox });\n    props.history.push(`/box/${response.data._id}`);\n  };\n\n  const handleInputChange = e => {\n    setNewBox(e.target.value);\n  };\n\n  return (\n    <Container>\n      <form onSubmit={handleSubmit} action=\"\">\n        <img src={logo} alt=\"\" />\n        <input onChange={handleInputChange} placeholder=\"Criar um box\" />\n        <SubmitButton color=\"#111\" type=\"submit\" disabled={!newBox}>\n          Criar\n        </SubmitButton>\n      </form>\n    </Container>\n  );\n};\n\nexport default Main;\n","import React, { useReducer, useEffect } from 'react';\nimport Dropzone from 'react-dropzone';\nimport { distanceInWords } from 'date-fns';\nimport pt from 'date-fns/locale/pt';\nimport socket from 'socket.io-client';\n\nimport api, { baseURL } from '../../services/api';\n\nimport { MdInsertDriveFile } from 'react-icons/md';\n\nimport logo from '../../assets/logo.svg';\nimport './styles.css';\n\nfunction reducer(box, action) {\n  switch (action.type) {\n    case 'ADD_FILE':\n      return { ...box, files: [action.data, ...box.files] };\n    case 'GET_BOX':\n      return action.data;\n    default:\n      return box;\n  }\n}\n\nconst Box = props => {\n  var [box, dispatchBox] = useReducer(reducer, {});\n\n  function subscribeToNewFiles() {\n    const boxId = props.match.params.id;\n    const io = socket(baseURL);\n    io.emit('connectRoom', boxId);\n    io.on('file', data => {\n      dispatchBox({ type: 'ADD_FILE', data: data });\n    });\n  }\n\n  useEffect(() => {\n    subscribeToNewFiles();\n    async function fetchApi() {\n      const boxId = props.match.params.id;\n      const response = await api.get(`/boxes/${boxId}`);\n      dispatchBox({ type: 'GET_BOX', data: response.data });\n    }\n    fetchApi();\n  }, []);\n\n  const handleUpload = files => {\n    files.forEach(file => {\n      const data = new FormData();\n      const boxId = props.match.params.id;\n      data.append('file', file);\n      api.post(`/boxes/${boxId}/files`, data);\n    });\n  };\n\n  return (\n    <div id=\"box-container\">\n      <header>\n        <img src={logo} alt=\"\" />\n        <h1>{box.title}</h1>\n      </header>\n\n      <Dropzone onDropAccepted={handleUpload}>\n        {({ getRootProps, getInputProps }) => (\n          <div className=\"upload\" {...getRootProps()}>\n            <input {...getInputProps()} />\n            <p>Arraste arquivos ou clique aqui</p>\n          </div>\n        )}\n      </Dropzone>\n\n      <ul>\n        {box.files &&\n          box.files.map(file => (\n            <li key={file._id}>\n              <a className=\"fileInfo\" href={file.url} target=\"_blank\">\n                <MdInsertDriveFile size={24} color=\"#a5cfff\" />\n                <strong>{file.title}</strong>\n              </a>\n              <span>\n                h√° {distanceInWords(file.createdAt, new Date(), { locale: pt })}\n              </span>\n            </li>\n          ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Box;\n","import React from 'react';\nimport { HashRouter, Route, Switch } from 'react-router-dom';\n\nimport Main from './pages/Main';\nimport Box from './pages/Box';\n\n/**\n * BrowserRoutes is a Router that uses the HTML5 history API to keep UI in sync with\n * the URL.\n */\nconst Routes = () => (\n  <HashRouter>\n    <Switch>\n      <Route path=\"/\" exact component={Main} />\n      <Route path=\"/box/:id\" component={Box} />\n    </Switch>\n  </HashRouter>\n);\n\nexport default Routes;\n","import React from 'react';\nimport './App.css'; // Remove default css from browser\n\nimport Routes from './routes';\n\nconst App = () => <Routes />;\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";"],"sourceRoot":""}